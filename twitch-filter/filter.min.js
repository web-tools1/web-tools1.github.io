var g="rgb(255, 0, 0);rgb(0, 0, 255);rgb(0, 128, 0);rgb(178, 34, 34);rgb(255, 127, 80);rgb(154, 205, 50);rgb(255, 69, 0);rgb(46, 139, 87);rgb(218, 165, 32);rgb(210, 105, 30);rgb(95, 158, 160);rgb(30, 144, 255);rgb(255, 105, 180);rgb(138, 43, 226);rgb(0, 255, 127)".split(";"),h={},l=new irc.client({options:{debug:!1},a:[]});function m(a){return a.replace(/^#/,"")}function p(a){return a[0].toUpperCase()+a.substr(1)}
function q(a){var b=Array.isArray(a);b||(a=a.split(""));a=function(){return a.map(function(a){return 1==a.length?a.replace(/[\u00A0-\u9999<>\&]/gim,function(a){return"&#"+a.charCodeAt(0)+";"}):a})}(a);b||(a=a.join(""));return a}
function t(a,b){var c=a.split(""),e;for(e in b){var d=b[e],k;for(k in d){var f=d[k];if("string"==typeof f){var f=f.split("-"),f=[parseInt(f[0]),parseInt(f[1])],r=Array.apply(null,Array(f[1]-f[0]+1)).map(function(){return""}),c=c.slice(0,f[0]).concat(r).concat(c.slice(f[1]+1,c.length));c.splice(f[0],1,'<img class="emoticon" src="http://static-cdn.jtvnw.net/emoticons/v1/'+e+'/3.0">')}}}return q(c).join("")}
function w(a,b,c){function e(a){var b=document.createElement("div");b.className="chat-badge-"+a;return b}var d=document.createElement("span");d.className="chat-badges";c?chatChages.appendChild(e("bot")):(b.username==a&&d.appendChild(e("broadcaster")),b["user-type"]&&d.appendChild(e(b["user-type"])),b.h&&d.appendChild(e("turbo")));return d}
function x(a,b,c,e){var d=document.createElement("div");d.className="chat-line chat-notice";d.innerHTML=a;void 0!==e&&(Array.isArray(e)&&(e=e.join(" ")),d.className+=" "+e);"number"==typeof c&&0!=c&&(d.dataset.level=c);y.appendChild(d);"number"==typeof b&&setTimeout(function(){d.dataset.f=""},b||500)}var A={};
function B(a,b,c,e){"-"==c&&(c=0);a=m(a);a=p(a);e?x(a+" is no longer hosting.",null,null,"chat-hosting-no"):x(a+" is now hosting "+p(b)+" for "+c+" viewer"+(1!==c?"s":"")+".",null,null,"chat-hosting-yes")}
l.addListener("message",function(a,b,c,e){var d=m(a),k=b.username,f=document.createElement("div"),r=document.createElement("span"),u=document.createElement("span"),z=document.createElement("span"),v=document.createElement("span"),n=b.color;null===n&&(h.hasOwnProperty(d)||(h[d]={}),h[d].hasOwnProperty(k)?n=h[d][k]:(n=g[Math.floor(Math.random()*g.length)],h[d][k]=n));f.className="chat-line";f.dataset.username=k;f.dataset.channel=a;"action"==b["message-type"]&&(f.className+=" chat-action");r.className=
"chat-channel";r.innerHTML=d;u.className="chat-name";u.style.color=n;u.innerHTML=b["display-name"]||k;z.className="chat-colon";v.className="chat-message";v.style.color=n;v.innerHTML=t(c,b.c);1<l.g.a.length&&f.appendChild(r);f.appendChild(w(d,b,e));f.appendChild(u);f.appendChild(z);f.appendChild(v);y.appendChild(f);C();y.scrollTop=5E3;(a=D(c))&&0<=a&&(E.appendChild(f.cloneNode(!0)).title="Comment Score: "+a)});
l.addListener("timeout",function(a,b){A.hasOwnProperty(a)||(A[a]={});if(!A[a].hasOwnProperty(b)||A[a][b]+1E4<+new Date)A[a][b]=+new Date,x(p(b)+" was timed-out in "+p(m(a)),1E3,1,"chat-delete-timeout");var c=document.querySelectorAll('.chat-line[data-channel="'+a+'"][data-username="'+b+'"]:not(.chat-timedout) .chat-message'),e;for(e in c){var d=c[e];"object"==typeof d&&(d.innerText="<Message deleted>",d.parentElement.className+=" chat-timedout")}});
l.addListener("clearchat",function(a){var b=document.querySelectorAll('.chat-line[data-channel="'+a+'"]'),c;for(c in b){var e=b[c];"object"==typeof e&&(e.className+=" chat-cleared")}x("Chat was cleared in "+p(m(a)),1E3,1,"chat-delete-clear")});l.addListener("hosting",B);l.addListener("unhost",function(a,b){B(a,null,b,!0)});var F=[];l.addListener("connecting",function(){x("Connecting",1E3,-4,"chat-connection-good-connecting")});l.addListener("logon",function(){x("Authenticating",1E3,-3,"chat-connection-good-logon")});
l.addListener("connectfail",function(){x("Connection failed",1E3,3,"chat-connection-bad-fail")});l.addListener("connected",function(){x("Connected",1E3,-2,"chat-connection-good-connected");F=[]});l.addListener("disconnected",function(a){x("Disconnected: "+(a||""),3E3,2,"chat-connection-bad-disconnected")});l.addListener("reconnect",function(){x("Reconnected",1E3,"chat-connection-good-reconnect")});l.addListener("join",function(a){-1==F.indexOf(a)&&(x("Joined "+p(m(a)),1E3,-1,"chat-room-join"),F.push(a))});
l.addListener("part",function(a){-1<F.indexOf(a)&&(x("Parted "+p(m(a)),1E3,-1,"chat-room-part"),F.splice(F.indexOf(a),1))});l.addListener("crash",function(){x("Crashed",1E4,4,"chat-crash")});var y=document.getElementById("feed-orig"),E=document.getElementById("feed-selec");
function D(a){if(a.length>document.getElementById("maxChars").value||a.length<document.getElementById("minChars").value||!document.getElementById("allowCaps").value&&a===a.toUpperCase()||a.split(" ").length<document.getElementById("minWords").value||function(a){filteredUsers.forEach(function(b){if(b===a)return!0});return!1}(a.username))return!1;var b=0;keywords.forEach(function(c){-1<a.indexOf(c[0])&&(b+=c[1])});return b}
function C(){var a=document.getElementById("maxRecords").value;[document.getElementById("feed-orig"),document.getElementById("feed-selec")].forEach(function(b){if(b.hasChildNodes()&&b.childNodes.length>a)for(var c=b.childNodes.length-a,e=0;e<c;e++)b.removeChild(b.childNodes[0])})}localStorage.b&&(document.getElementById("channelInput").value=localStorage.b);window.onresize=function(){};