Object.prototype.forEach=function(a){for(var h=Object.keys(this),f=0;f<h.length;f++)a(this[h[f]],h[f])};function $(a){var h=document.querySelectorAll(a);return 0===h.length?(console.error("No elements found for selector "+a),document.body):1===h.length?h[0]:h}HTMLElement.prototype.show=function(){this.style.display="inherit"};HTMLElement.prototype.hide=function(){this.style.display="none"};document.body.addEventListener("dragover",function(a){a.preventDefault();a.stopPropagation()},!0);
document.body.addEventListener("dragleave",function(a){a.preventDefault();a.stopPropagation()},!0);(function(){var a=!1;window.ga||(window.ga=function(){a||(a=!0,console.warn("GA not found"))})})();
(function(a){a.URL=a.URL||a.webkitURL;if(a.Blob&&a.URL)try{new Blob;return}catch(f){}var h=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||function(a){var b=function(b){return Object.prototype.toString.call(b).match(/^\[object\s(.*)\]$/)[1]},c=function(){this.data=[]},l=function(b,a,c){this.data=b;this.size=b.length;this.type=a;this.encoding=c},d=c.prototype,e=l.prototype,f=a.FileReaderSync,g=function(b){this.code=this[this.name=b]},k="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),
h=k.length,q=a.URL||a.webkitURL||a,t=q.createObjectURL,p=q.revokeObjectURL,m=q,n=a.btoa,r=a.atob,u=a.ArrayBuffer,w=a.Uint8Array,x=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(l.fake=e.fake=!0;h--;)g.prototype[k[h]]=h+1;q.createObjectURL||(m=a.URL=function(b){var a=document.createElementNS("http://www.w3.org/1999/xhtml","a");a.href=b;"origin"in a||("data:"===a.protocol.toLowerCase()?a.origin=null:(b=b.match(x),a.origin=b&&b[1]));return a});m.createObjectURL=function(b){var a=b.type;null===a&&(a="application/octet-stream");
if(b instanceof l)return a="data:"+a,"base64"===b.encoding?a+";base64,"+b.data:"URI"===b.encoding?a+","+decodeURIComponent(b.data):n?a+";base64,"+n(b.data):a+","+encodeURIComponent(b.data);if(t)return t.call(q,b)};m.revokeObjectURL=function(b){"data:"!==b.substring(0,5)&&p&&p.call(q,b)};d.append=function(a){var c=this.data;if(w&&(a instanceof u||a instanceof w)){var d="";a=new w(a);for(var e=0,k=a.length;e<k;e++)d+=String.fromCharCode(a[e]);c.push(d)}else if("Blob"===b(a)||"File"===b(a))if(f)d=new f,
c.push(d.readAsBinaryString(a));else throw new g("NOT_READABLE_ERR");else a instanceof l?"base64"===a.encoding&&r?c.push(r(a.data)):"URI"===a.encoding?c.push(decodeURIComponent(a.data)):"raw"===a.encoding&&c.push(a.data):("string"!==typeof a&&(a+=""),c.push(unescape(encodeURIComponent(a))))};d.getBlob=function(a){arguments.length||(a=null);return new l(this.data.join(""),a,"raw")};d.toString=function(){return"[object BlobBuilder]"};e.slice=function(a,b,c){var d=arguments.length;3>d&&(c=null);return new l(this.data.slice(a,
1<d?b:this.data.length),c,this.encoding)};e.toString=function(){return"[object Blob]"};e.close=function(){this.size=0;delete this.data};return c}(a);a.Blob=function(a,b){var c=b?b.type||"":"",l=new h;if(a)for(var d=0,e=a.length;d<e;d++)Uint8Array&&a[d]instanceof Uint8Array?l.append(a[d].buffer):l.append(a[d]);c=l.getBlob(c);!c.slice&&c.webkitSlice&&(c.slice=c.webkitSlice);return c};a.Blob.prototype=(Object.getPrototypeOf||function(a){return a.__proto__})(new a.Blob)})("undefined"!==typeof self&&self||
"undefined"!==typeof window&&window||this.content||this);
(function(a){var h=a.Uint8Array,f=(a=a.HTMLCanvasElement)&&a.prototype,b=/\s*;\s*base64\s*(?:;|$)/i,c="toDataURL",l;h&&(l=new h([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]));!a||f.toBlob&&f.toBlobHD||(f.toBlob||(f.toBlob=function(a,e){e||(e="image/png");if(this.mozGetAsFile)a(this.mozGetAsFile("canvas",e));else if(this.msToBlob&&
/^\s*image\/png\s*(?:$|;)/i.test(e))a(this.msToBlob());else{var d=Array.prototype.slice.call(arguments,1),g=this[c].apply(this,d),k=g.indexOf(","),d=g.substring(k+1),g=b.test(g.substring(0,k)),f;if(Blob.fake)f=new Blob,f.encoding=g?"base64":"URI",f.data=d,f.size=d.length;else if(h)if(g){f=Blob;for(var g=d.length,k=new h(g/4*3|0),q=0,t=0,p=[0,0],m=0,n=0,r,u;g--;)u=d.charCodeAt(q++),r=l[u-43],255!==r&&void 0!==r&&(p[1]=p[0],p[0]=u,n=n<<6|r,m++,4===m&&(k[t++]=n>>>16,61!==p[1]&&(k[t++]=n>>>8),61!==p[0]&&
(k[t++]=n),m=0));f=new f([k],{type:e})}else f=new Blob([decodeURIComponent(d)],{type:e});a(f)}}),f.toBlobHD=!f.toBlobHD&&f.toDataURLHD?function(){c="toDataURLHD";var a=this.toBlob();c="toDataURL";return a}:f.toBlob)})("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content||this);
var saveAs=saveAs||function(a){if("undefined"===typeof a||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))return function(){console.error("IE <10 not supported")};var h=a.document.createElementNS("http://www.w3.org/1999/xhtml","a"),f="download"in h,b=/constructor/i.test(a.HTMLElement),c=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(b){(a.setImmediate||a.setTimeout)(function(){throw b;},0)},d=function(b){setTimeout(function(){"string"===typeof b?(a.URL||a.webkitURL||
a).revokeObjectURL(b):b.remove()},4E4)},e=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a},v=function(g,v,q){q||(g=e(g));var k=this,p="application/octet-stream"===g.type,m,n=function(){for(var a=["writestart","progress","write","writeend"],a=[].concat(a),b=a.length;b--;){var c=k["on"+a[b]];if("function"===typeof c)try{c.call(k,k)}catch(x){l(x)}}};k.readyState=k.INIT;f?(m=(a.URL||a.webkitURL||
a).createObjectURL(g),setTimeout(function(){h.href=m;h.download=v;var a=new MouseEvent("click");h.dispatchEvent(a);n();d(m);k.readyState=k.DONE})):function(){if((c||p&&b)&&a.FileReader){var e=new FileReader;e.onloadend=function(){var b=c?e.result:e.result.replace(/^data:[^;]*;/,"data:attachment/file;");a.open(b,"_blank")||(a.location.href=b);k.readyState=k.DONE;n()};e.readAsDataURL(g);k.readyState=k.INIT}else m||(m=(a.URL||a.webkitURL||a).createObjectURL(g)),p?a.location.href=m:a.open(m,"_blank")||
(a.location.href=m),k.readyState=k.DONE,n(),d(m)}()},g=v.prototype;if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob)return function(a,b,c){b=b||a.name||"download";c||(a=e(a));return navigator.msSaveOrOpenBlob(a,b)};g.abort=function(){};g.readyState=g.INIT=0;g.WRITING=1;g.DONE=2;g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null;return function(a,b,c){return new v(a,b||a.name||"download",c)}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&
window||this.content),resizeFramework=function(){function a(){this.fileName="Resized Image";this.fileSize=0;this.fileType="image/png";this.data=new Image;this.ctx=(this.canvas=document.createElement("canvas")).getContext("2d");this.croppingElems=[];this.cropData={sx:0,sy:0,sWidth:100,sHeight:100};this.resizeData={dWidth:100,dHeight:100};this.dataMaps={outputFileSize:[],outputResolution:[],imageLoad:[],imageCropped:[]};this.resizeBy=new h(this)}function h(a){this.percent=function(b){b=b||50;a.updateResizeData(b/
100*a.cropData.sWidth,b/100*a.cropData.sHeight)};this.customSize=function(b,l){a.updateResizeData(b||100,l||100)}}HTMLCanvasElement.prototype.drawImg=function(a){a?this.sourceImg=a:a=this.sourceImg;if(a.data.src){var b=this.getContext("2d");this.width=a.data.width;this.height=a.data.height;b.drawImage(a.data,0,0,this.width,this.height)}};HTMLCanvasElement.prototype.drawCropArea=function(){var a=this.cropArea.x,c=this.cropArea.y,l=this.cropArea.dx,d=this.cropArea.dy;this.drawImg();var e=this.getContext("2d");
e.fillStyle="rgba(0,0,0,0.5)";e.fillRect(0,0,this.width,c);e.fillRect(0,d,this.width,this.height);e.fillRect(0,c,a,d-c);e.fillRect(l,c,this.width,d-c);e.strokeStyle="#ffffff";e.moveTo(a,c);e.lineTo(l,c);e.lineTo(l,d);e.lineTo(a,d);e.lineTo(a,c);e.stroke()};HTMLCanvasElement.prototype.startCrop=function(a){this.cropping=!0;var b=this.width/this.clientWidth;this.cropArea={x:a.offsetX*b,y:a.offsetY*b,dx:a.offsetX*b+100,dy:a.offsetY*b+100};this.drawCropArea()};HTMLCanvasElement.prototype.mouseMove=function(a){if(this.cropping){var b=
this.width/this.clientWidth;this.cropArea.dx=a.offsetX*b;this.cropArea.dy=a.offsetY*b;this.drawCropArea()}};HTMLCanvasElement.prototype.finishCrop=function(a){this.cropping&&(this.cropping=!1,this.mouseMove(a),this.sourceImg.updateCropData(this.cropArea.x,this.cropArea.y,this.cropArea.dx-this.cropArea.x,this.cropArea.dy-this.cropArea.y))};HTMLCanvasElement.prototype.clearCropArea=function(){this.cropArea.x=0;this.cropArea.y=0;this.cropArea.dx=this.sourceImg.data.width;this.cropArea.dy=this.sourceImg.data.height;
this.sourceImg.updateCropData(this.cropArea.x,this.cropArea.y,this.cropArea.dx-this.cropArea.x,this.cropArea.dy-this.cropArea.y);this.drawCropArea()};if(-1<window.location.href.toLowerCase().indexOf(atob("c3BlZWR5LnRvb2xz"))){a.prototype.drawToCroppingElems=function(){var a=this;this.croppingElems.forEach(function(b){b.drawImg(a)})};a.prototype.updateCropData=function(a,c,l,d){this.cropData={sx:a,sy:c,sWidth:l,sHeight:d};this.updateOutputCanvas();this.dataMaps.imageCropped.forEach(function(a){a(l,
d)})};a.prototype.updateResizeData=function(a,c){this.resizeData={dWidth:a,dHeight:c};this.updateOutputCanvas()};a.prototype.updateOutputCanvas=function(){this.canvas.width=this.resizeData.dWidth;this.canvas.height=this.resizeData.dHeight;this.canvas.getContext("2d").drawImage(this.data,this.cropData.sx,this.cropData.sy,this.cropData.sWidth,this.cropData.sHeight,0,0,this.resizeData.dWidth,this.resizeData.dHeight)};a.prototype.loadFile=function(a,c){var b=new FileReader,d=this;b.onload=function(a){d.data.onload=
function(){d.drawToCroppingElems();"function"===typeof c&&c(d)};d.data.src=a.target.result;d.updateCropData(0,0,d.data.width,d.data.height);d.updateResizeData(d.data.width,d.data.height);d.dataMaps.imageLoad.forEach(function(a){a(d.data.width,d.data.height,d.fileSizeKB,d.fileName)})};b.readAsDataURL(a);this.fileName=a.name.split(".")[0];this.fileSize=a.size;this.fileSizeKB=Math.round(a.size/1024*100)/100;ga("send","event","Image Resize","Image Uploaded",this.fileName,this.fileSizeKB)};a.prototype.dropEvent=
function(a,c){a.preventDefault();a.stopPropagation();0<a.dataTransfer.files.length&&this.loadFile(a.dataTransfer.files[0],c)};a.prototype.uploadEvent=function(a,c){0<a.target.files.length?this.loadFile(a.target.files[0],c):console.warn("No files were uploaded")};a.prototype.download=function(a,c,f){a=a||"JPEG";var b=this;this.canvas.toBlob(function(c){var d=Math.round(c.size/1024*100)/100,e="rsz_"+b.fileName+"."+a;saveAs(c,e);ga("send","event","Image Resize","Image Downloaded",e,d);"function"===typeof f&&
f(e,d)},"image/"+a,c||1)};a.prototype.installCropping=function(a){a||console.error("Canvas element not defined");this.croppingElems.push(a);a.drawImg(this);a.addEventListener("mousedown",a.startCrop);a.addEventListener("mousemove",a.mouseMove);a.addEventListener("mouseout",a.finishCrop);a.addEventListener("mouseup",a.finishCrop)};a.prototype.map=function(a,c){"object"===typeof this.dataMaps[a]?this.dataMaps[a].push(c):console.error("No such data point: "+a)};var f=function(){var a=document.createElement("div");
return("draggable"in a||"ondragstart"in a&&"ondrop"in a)&&"FormData"in window&&"FileReader"in window}();return{Img:a,fileDropSupported:f,resizeCanvas:function(a,c,f){var b=document.createElement("canvas");b.width=c;b.height=f;b.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,c,f);return b}}}}();