Object.prototype.forEach=function(a){for(var k=Object.keys(this),g=0;g<k.length;g++)a(this[k[g]],k[g])};function $(a){var k=document.querySelectorAll(a);return 0===k.length?(console.error("No elements found for selector "+a),document.body):1===k.length?k[0]:k}HTMLElement.prototype.show=function(){this.style.display="inherit"};HTMLElement.prototype.hide=function(){this.style.display="none"};document.body.addEventListener("dragover",function(a){a.preventDefault();a.stopPropagation()},!0);
document.body.addEventListener("dragleave",function(a){a.preventDefault();a.stopPropagation()},!0);(function(){var a=!1;window.ga||(window.ga=function(){a||(a=!0,console.warn("GA not found"))})})();
(function(a){a.URL=a.URL||a.webkitURL;if(a.Blob&&a.URL)try{new Blob;return}catch(g){}var k=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||function(a){var c=function(c){return Object.prototype.toString.call(c).match(/^\[object\s(.*)\]$/)[1]},b=function(){this.data=[]},d=function(c,a,b){this.data=c;this.size=c.length;this.type=a;this.encoding=b},h=b.prototype,e=d.prototype,k=a.FileReaderSync,f=function(c){this.code=this[this.name=c]},p="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),
n=p.length,q=a.URL||a.webkitURL||a,l=q.createObjectURL,t=q.revokeObjectURL,m=q,r=a.btoa,u=a.atob,v=a.ArrayBuffer,w=a.Uint8Array,y=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(d.fake=e.fake=!0;n--;)f.prototype[p[n]]=n+1;q.createObjectURL||(m=a.URL=function(c){var a=document.createElementNS("http://www.w3.org/1999/xhtml","a");a.href=c;"origin"in a||("data:"===a.protocol.toLowerCase()?a.origin=null:(c=c.match(y),a.origin=c&&c[1]));return a});m.createObjectURL=function(c){var a=c.type;null===a&&(a="application/octet-stream");
if(c instanceof d)return a="data:"+a,"base64"===c.encoding?a+";base64,"+c.data:"URI"===c.encoding?a+","+decodeURIComponent(c.data):r?a+";base64,"+r(c.data):a+","+encodeURIComponent(c.data);if(l)return l.call(q,c)};m.revokeObjectURL=function(c){"data:"!==c.substring(0,5)&&t&&t.call(q,c)};h.append=function(a){var b=this.data;if(w&&(a instanceof v||a instanceof w)){var e="";a=new w(a);for(var p=0,h=a.length;p<h;p++)e+=String.fromCharCode(a[p]);b.push(e)}else if("Blob"===c(a)||"File"===c(a))if(k)e=new k,
b.push(e.readAsBinaryString(a));else throw new f("NOT_READABLE_ERR");else a instanceof d?"base64"===a.encoding&&u?b.push(u(a.data)):"URI"===a.encoding?b.push(decodeURIComponent(a.data)):"raw"===a.encoding&&b.push(a.data):("string"!==typeof a&&(a+=""),b.push(unescape(encodeURIComponent(a))))};h.getBlob=function(a){arguments.length||(a=null);return new d(this.data.join(""),a,"raw")};h.toString=function(){return"[object BlobBuilder]"};e.slice=function(a,c,b){var e=arguments.length;3>e&&(b=null);return new d(this.data.slice(a,
1<e?c:this.data.length),b,this.encoding)};e.toString=function(){return"[object Blob]"};e.close=function(){this.size=0;delete this.data};return b}(a);a.Blob=function(a,c){var b=c?c.type||"":"",d=new k;if(a)for(var h=0,e=a.length;h<e;h++)Uint8Array&&a[h]instanceof Uint8Array?d.append(a[h].buffer):d.append(a[h]);b=d.getBlob(b);!b.slice&&b.webkitSlice&&(b.slice=b.webkitSlice);return b};a.Blob.prototype=(Object.getPrototypeOf||function(a){return a.__proto__})(new a.Blob)})("undefined"!==typeof self&&self||
"undefined"!==typeof window&&window||this.content||this);
(function(a){var k=a.Uint8Array,g=(a=a.HTMLCanvasElement)&&a.prototype,c=/\s*;\s*base64\s*(?:;|$)/i,b="toDataURL",d;k&&(d=new k([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]));!a||g.toBlob&&g.toBlobHD||(g.toBlob||(g.toBlob=function(a,e){e||(e="image/png");if(this.mozGetAsFile)a(this.mozGetAsFile("canvas",e));else if(this.msToBlob&&
/^\s*image\/png\s*(?:$|;)/i.test(e))a(this.msToBlob());else{var g=Array.prototype.slice.call(arguments,1),f=this[b].apply(this,g),p=f.indexOf(","),g=f.substring(p+1),f=c.test(f.substring(0,p)),n;if(Blob.fake)n=new Blob,n.encoding=f?"base64":"URI",n.data=g,n.size=g.length;else if(k)if(f){n=Blob;for(var f=g.length,p=new k(f/4*3|0),q=0,l=0,t=[0,0],m=0,r=0,u,v;f--;)v=g.charCodeAt(q++),u=d[v-43],255!==u&&void 0!==u&&(t[1]=t[0],t[0]=v,r=r<<6|u,m++,4===m&&(p[l++]=r>>>16,61!==t[1]&&(p[l++]=r>>>8),61!==t[0]&&
(p[l++]=r),m=0));n=new n([p],{type:e})}else n=new Blob([decodeURIComponent(g)],{type:e});a(n)}}),g.toBlobHD=!g.toBlobHD&&g.toDataURLHD?function(){b="toDataURLHD";var a=this.toBlob();b="toDataURL";return a}:g.toBlob)})("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content||this);
var saveAs=saveAs||function(a){if("undefined"===typeof a||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))return function(){console.error("IE <10 not supported")};var k=a.document.createElementNS("http://www.w3.org/1999/xhtml","a"),g="download"in k,c=/constructor/i.test(a.HTMLElement),b=/CriOS\/[\d]+/.test(navigator.userAgent),d=function(c){(a.setImmediate||a.setTimeout)(function(){throw c;},0)},h=function(c){setTimeout(function(){"string"===typeof c?(a.URL||a.webkitURL||
a).revokeObjectURL(c):c.remove()},4E4)},e=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a},x=function(f,n,q){q||(f=e(f));var l=this,t="application/octet-stream"===f.type,m,r=function(){for(var a=["writestart","progress","write","writeend"],a=[].concat(a),c=a.length;c--;){var b=l["on"+a[c]];if("function"===typeof b)try{b.call(l,l)}catch(e){d(e)}}};q=function(){if((b||t&&c)&&a.FileReader){var d=
new FileReader;d.onloadend=function(){var c=b?d.result:d.result.replace(/^data:[^;]*;/,"data:attachment/file;");a.open(c,"_blank")||(a.location.href=c);l.readyState=l.DONE;r()};d.readAsDataURL(f);l.readyState=l.INIT}else m||(m=(a.URL||a.webkitURL||a).createObjectURL(f)),t?a.location.href=m:a.open(m,"_blank")||(a.location.href=m),l.readyState=l.DONE,r(),h(m)};l.readyState=l.INIT;g?(m=(a.URL||a.webkitURL||a).createObjectURL(f),setTimeout(function(){k.href=m;k.download=n;var a=new MouseEvent("click");
k.dispatchEvent(a);r();h(m);l.readyState=l.DONE})):q()},f=x.prototype;if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob)return function(a,c,b){c=c||a.name||"download";b||(a=e(a));return navigator.msSaveOrOpenBlob(a,c)};f.abort=function(){};f.readyState=f.INIT=0;f.WRITING=1;f.DONE=2;f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null;return function(a,c,b){return new x(a,c||a.name||"download",b)}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&
window||this.content),resizeFramework=function(){function a(){this.fileName="Resized Image";this.fileSize=0;this.fileType="image/png";this.data=new Image;this.ctx=(this.canvas=document.createElement("canvas")).getContext("2d");this.croppingElems=[];this.cropData={sx:0,sy:0,sWidth:100,sHeight:100};this.resizeData={dWidth:100,dHeight:100};this.dataMaps={outputFileSize:[],outputResolution:[],imageLoad:[],imageCropped:[]};this.resizeBy=new k(this)}function k(a){this.percent=function(b){b=b||50;a.updateResizeData(b/
100*a.cropData.sWidth,b/100*a.cropData.sHeight)};this.customSize=function(b,d,h){b=b||100;d=d||100;h&&("height"===h?b=Math.round(d/a.data.height*a.data.width):d=Math.round(width/a.data.width*a.data.height));a.updateResizeData(b,d)}}HTMLCanvasElement.prototype.drawImg=function(a){a?this.sourceImg=a:a=this.sourceImg;if(a.data.src){var b=this.getContext("2d");this.width=a.data.width;this.height=a.data.height;b.drawImage(a.data,0,0,this.width,this.height)}};HTMLCanvasElement.prototype.drawCropArea=function(){var a=
this.cropArea.x,b=this.cropArea.y,d=this.cropArea.dx,h=this.cropArea.dy;this.drawImg();var e=this.getContext("2d");e.fillStyle="rgba(0,0,0,0.5)";e.fillRect(0,0,this.width,b);e.fillRect(0,h,this.width,this.height);e.fillRect(0,b,a,h-b);e.fillRect(d,b,this.width,h-b);e.strokeStyle="#ffffff";e.moveTo(a,b);e.lineTo(d,b);e.lineTo(d,h);e.lineTo(a,h);e.lineTo(a,b);e.stroke()};HTMLCanvasElement.prototype.startCrop=function(a){this.cropping=!0;var b=this.width/this.clientWidth;this.cropArea={x:a.offsetX*b,
y:a.offsetY*b,dx:a.offsetX*b+100,dy:a.offsetY*b+100};this.drawCropArea()};HTMLCanvasElement.prototype.mouseMove=function(a){if(this.cropping){var b=this.width/this.clientWidth;this.cropArea.dx=a.offsetX*b;this.cropArea.dy=a.offsetY*b;this.drawCropArea()}};HTMLCanvasElement.prototype.finishCrop=function(a){this.cropping&&(this.cropping=!1,this.mouseMove(a),this.sourceImg.updateCropData(this.cropArea.x,this.cropArea.y,this.cropArea.dx-this.cropArea.x,this.cropArea.dy-this.cropArea.y))};HTMLCanvasElement.prototype.clearCropArea=
function(){this.cropArea.x=0;this.cropArea.y=0;this.cropArea.dx=this.sourceImg.data.width;this.cropArea.dy=this.sourceImg.data.height;this.sourceImg.updateCropData(this.cropArea.x,this.cropArea.y,this.cropArea.dx-this.cropArea.x,this.cropArea.dy-this.cropArea.y);this.drawCropArea()};if(-1<window.location.href.toLowerCase().indexOf(atob("c3BlZWR5LnRvb2xz"))){a.prototype.drawToCroppingElems=function(){var a=this;this.croppingElems.forEach(function(b){b.drawImg(a)})};a.prototype.updateCropData=function(a,
b,d,h){this.cropData={sx:a,sy:b,sWidth:d,sHeight:h};this.updateOutputCanvas();this.dataMaps.imageCropped.forEach(function(a){a(d,h)})};a.prototype.updateResizeData=function(a,b){this.resizeData={dWidth:a,dHeight:b};this.updateOutputCanvas()};a.prototype.updateOutputCanvas=function(){this.canvas.width=this.resizeData.dWidth;this.canvas.height=this.resizeData.dHeight;this.canvas.getContext("2d").drawImage(this.data,this.cropData.sx,this.cropData.sy,this.cropData.sWidth,this.cropData.sHeight,0,0,this.resizeData.dWidth,
this.resizeData.dHeight)};a.prototype.loadFile=function(a){var b=new FileReader,d=this;b.onload=function(a){d.data.onload=function(){d.drawToCroppingElems()};d.data.src=a.target.result;d.updateCropData(0,0,d.data.width,d.data.height);d.updateResizeData(d.data.width,d.data.height);d.dataMaps.imageLoad.forEach(function(a){a(d.data.width,d.data.height,d.fileSizeKB,d.fileName)})};b.readAsDataURL(a);this.fileName=a.name.split(".")[0];this.fileSize=a.size;this.fileSizeKB=Math.round(a.size/1024*100)/100;
ga("send","event","Image Resize","Image Uploaded",this.fileName,this.fileSizeKB)};a.prototype.dropEvent=function(a){a.preventDefault();a.stopPropagation();0<a.dataTransfer.files.length&&this.loadFile(a.dataTransfer.files[0])};a.prototype.uploadEvent=function(a){0<a.target.files.length?this.loadFile(a.target.files[0]):console.warn("No files were uploaded")};a.prototype.download=function(a,b,d){a=a||"JPEG";var h=this;this.canvas.toBlob(function(b){var g=Math.round(b.size/1024*100)/100,f="rsz_"+h.fileName+
"."+a;saveAs(b,f);ga("send","event","Image Resize","Image Downloaded",f,g);"function"===typeof d&&d(f,g)},"image/"+a,b||1)};a.prototype.installCropping=function(a){a||console.error("Canvas element not defined");this.croppingElems.push(a);a.drawImg(this);a.addEventListener("mousedown",a.startCrop);a.addEventListener("mousemove",a.mouseMove);a.addEventListener("mouseout",a.finishCrop);a.addEventListener("mouseup",a.finishCrop)};a.prototype.map=function(a,b){"object"===typeof this.dataMaps[a]?this.dataMaps[a].push(b):
console.error("No such data point: "+a)};var g=function(){var a=document.createElement("div");return("draggable"in a||"ondragstart"in a&&"ondrop"in a)&&"FormData"in window&&"FileReader"in window}();return{Img:a,fileDropSupported:g}}}();